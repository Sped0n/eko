function y = filter_simu_lp(x)
%FILTER_SIMU_LP Filters input x and returns output y.

% MATLAB Code
% Generated by MATLAB(R) 23.2 and DSP System Toolbox 23.2.
% Generated on: 22-Apr-2024 00:08:05

%#codegen

% To generate C/C++ code from this function use the codegen command. Type
% 'help codegen' for more information.

persistent Hd;

if isempty(Hd)
    
    % The following code was used to design the filter coefficients:
    % % Equiripple Lowpass filter designed using the FIRPM function.
    %
    % % All frequency values are in Hz.
    % Fs = 48820;  % Sampling Frequency
    %
    % N     = 60;    % Order
    % Fpass = 3500;  % Passband Frequency
    % Fstop = 5500;  % Stopband Frequency
    % Wpass = 1;     % Passband Weight
    % Wstop = 1;     % Stopband Weight
    % dens  = 20;    % Density Factor
    %
    % % Calculate the coefficients using the FIRPM function.
    % b  = firpm(N, [0 Fpass Fstop Fs/2]/(Fs/2), [1 1 0 0], [Wpass Wstop], ...
    %            {dens});
    
    Hd = dsp.FIRFilter( ...
        'Numerator', [-0.00278219589051821 -0.00154234714739935 ...
        -0.000973025076917089 0.000359176848241914 0.00215462783621494 ...
        0.0037956150485327 0.0045214843254032 0.00371180630644199 ...
        0.00120000932906498 -0.00252219755643603 -0.00631843857519131 ...
        -0.00869538944432323 -0.00830828376810741 -0.00453917337529809 ...
        0.00207255271309628 0.00974043112979452 0.0157992708532577 ...
        0.0174887300317276 0.0129607035007753 0.00218482132544583 ...
        -0.0125806646619956 -0.0269968554740309 -0.0355688551422189 ...
        -0.0331056512897146 -0.016324150864054 0.0148843817786121 ...
        0.0569557386473518 0.103144050788731 0.144930637017087 0.174035608327281 ...
        0.18446724576925 0.174035608327281 0.144930637017087 0.103144050788731 ...
        0.0569557386473518 0.0148843817786121 -0.016324150864054 ...
        -0.0331056512897146 -0.0355688551422189 -0.0269968554740309 ...
        -0.0125806646619956 0.00218482132544583 0.0129607035007753 ...
        0.0174887300317276 0.0157992708532577 0.00974043112979452 ...
        0.00207255271309628 -0.00453917337529809 -0.00830828376810741 ...
        -0.00869538944432323 -0.00631843857519131 -0.00252219755643603 ...
        0.00120000932906498 0.00371180630644199 0.0045214843254032 ...
        0.0037956150485327 0.00215462783621494 0.000359176848241914 ...
        -0.000973025076917089 -0.00154234714739935 -0.00278219589051821], ...
        'CoefficientsDataType', 'Custom', ...
        'CustomCoefficientsDataType', numerictype(true,16,17));
end

s = fi(x,1,16,15,'RoundingMethod','Round','OverflowAction','Saturate');
y = step(Hd,s);


% [EOF]
